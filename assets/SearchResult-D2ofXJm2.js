import{l as W,u as X,m as $,p as Z,q as ss,v as ts,x as ls,j as T,y as F,k as l,z as es,w as os,A as Es,R as b,B as as,C as hs,D as ms,E as us,G as ps,H as G,I as L,J as is,K as rs,L as cs,M as Bs,N as ns,O as As,P as ds,Q as vs,S as j,T as gs,U as D}from"./app-DS9_dmLP.js";const ys=["/","/about.html","/docs/ChatGPT.html","/docs/","/docs/indiehacker-handbook.html","/posts/","/docs/claude/1.Claude%E7%AE%80%E4%BB%8B.html","/docs/claude/2.Claude%E6%8F%90%E7%A4%BA%E7%9A%84%E5%88%9D%E6%AD%A5%E7%BC%96%E5%86%99%E4%B8%8E%E4%BC%98%E5%8C%96.html","/docs/claude/3.Claude%E6%8F%90%E7%A4%BA%E5%AE%9E%E7%94%A8%E7%BC%96%E5%86%99%E6%8A%80%E5%B7%A7.html","/docs/claude/4.Claude%E7%9A%84%E5%85%B7%E4%BD%93%E6%8F%90%E7%A4%BA%E5%AE%9E%E4%BE%8B.html","/docs/claude/5.Claude%E6%8F%90%E7%A4%BA%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5.html","/docs/claude/6.%E5%88%9B%E4%BD%9C%E4%B8%80%E7%AF%87%E7%A7%91%E5%B9%BB%E6%95%85%E4%BA%8B%E7%9A%84%E5%AE%9E%E8%B7%B5.html","/docs/claude/","/docs/demo/","/docs/demo/disable.html","/docs/demo/layout.html","/docs/demo/markdown.html","/docs/demo/page.html","/docs/novel/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8Claude%20AI%E8%BE%85%E5%8A%A9%E5%88%9B%E4%BD%9C%E5%B0%8F%E8%AF%B4.html","/docs/novel/%E5%B0%8F%E8%AF%B4%E5%88%9B%E4%BD%9C%E7%9A%84%E6%9C%80%E4%BD%8E%E8%A6%81%E6%B1%82%E6%98%AF%E4%BB%80%E4%B9%88.html","/docs/rust/rustlings.html","/docs/%E5%90%91GPT%E9%AB%98%E6%95%88%E6%8F%90%E9%97%AE/1.%E8%AE%A4%E8%AF%86GPT.html","/docs/%E5%90%91GPT%E9%AB%98%E6%95%88%E6%8F%90%E9%97%AE/2.GPT%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%90%E8%BD%AC%E7%9A%84.html","/docs/%E5%90%91GPT%E9%AB%98%E6%95%88%E6%8F%90%E9%97%AE/3.GPT%E8%83%BD%E5%A4%9F%E5%81%9A%E4%BB%80%E4%B9%88.html","/docs/%E5%90%91GPT%E9%AB%98%E6%95%88%E6%8F%90%E9%97%AE/4.%E9%AB%98%E6%95%88%E6%8F%90%E7%A4%BA%E7%9A%845%E4%B8%AA%E6%96%B9%E5%BC%8F.html","/docs/%E5%90%91GPT%E9%AB%98%E6%95%88%E6%8F%90%E9%97%AE/","/posts/2008/01.html","/posts/2008/02.html","/posts/2008/03.html","/posts/2008/04.html","/posts/2008/05.html","/posts/2008/06.html","/posts/2009/01.html","/posts/2010/01.html","/posts/2010/02.html","/posts/2018/01.html","/posts/2018/02.html","/posts/2018/03.html","/posts/2018/04.html","/posts/2018/05.html","/posts/2019/01.html","/posts/2020/01.html","/posts/2020/02.html","/posts/2021/09.html","/posts/2021/1.html","/posts/2021/10.html","/posts/2021/11.html","/posts/2021/12.html","/posts/2021/13.html","/posts/2021/14.html","/posts/2021/15.html","/posts/2021/16.html","/posts/2021/17.html","/posts/2021/18.html","/posts/2021/19.html","/posts/2021/2.html","/posts/2021/20.html","/posts/2021/22.html","/posts/2021/23.html","/posts/2021/24.html","/posts/2021/25.html","/posts/2021/26.html","/posts/2021/27.html","/posts/2021/28.html","/posts/2021/29.html","/posts/2021/3.html","/posts/2021/30.html","/posts/2021/31.html","/posts/2021/32.html","/posts/2021/33.html","/posts/2021/34.html","/posts/2021/4.html","/posts/2021/5.html","/posts/2021/6.html","/posts/2021/8.html","/posts/2022/0906.html","/posts/2022/0908-2.html","/posts/2022/0908.html","/posts/2022/0909.html","/posts/2022/0910.html","/posts/2022/0913.html","/posts/2022/0926.html","/posts/2022/0930.html","/posts/2022/1001.html","/posts/2022/10012.html","/posts/2022/10013.html","/posts/2022/1002.html","/posts/2022/1003.html","/posts/2022/10032.html","/posts/2022/1004-2.html","/posts/2022/1004.html","/posts/2022/1005.html","/posts/2022/1006-2.html","/posts/2022/1006.html","/posts/2022/1009-2.html","/posts/2022/1009-3.html","/posts/2022/1009.html","/posts/2022/1010.html","/posts/2022/1011.html","/posts/2022/1012.html","/posts/2022/1013.html","/posts/2022/1014.html","/posts/2022/1015.html","/posts/2022/1016.html","/posts/2022/30.html","/posts/2022/31.html","/posts/2022/32.html","/posts/2022/33.html","/posts/2022/34.html","/posts/2023/02.html","/posts/2023/0228.html","/posts/2023/03.html","/posts/2023/04.html","/posts/2023/05.html","/posts/2023/06.html","/posts/2023/07.html","/posts/2023/08.html","/posts/2023/09.html","/posts/2023/10.html","/posts/2023/11.html","/posts/2023/12.html","/posts/2023/13.html","/posts/2023/14.html","/posts/2023/15.html","/posts/2023/16.html","/posts/2023/17.html","/posts/2023/18.html","/posts/2023/19.html","/posts/2023/20.html","/posts/2023/21.html","/posts/2023/23.html","/posts/2023/24.html","/posts/2023/26.html","/posts/2023/27.html","/posts/2023/28.html","/posts/2023/29.html","/posts/2023/30.html","/posts/2023/31.html","/posts/2023/32.html","/posts/2023/33.html","/posts/2023/34.html","/posts/2023/35.html","/posts/2023/36.html","/posts/2023/37.html","/posts/2023/38.html","/posts/2023/39.html","/posts/2023/40.html","/posts/2023/41.html","/posts/2023/42.html","/posts/2023/43.html","/posts/2023/44.html","/posts/2023/45.html","/posts/2023/46.html","/posts/2023/47.html","/posts/2023/48.html","/posts/2023/49.html","/posts/2023/50.html","/posts/2023/51.html","/posts/2023/52.html","/posts/2023/ChatGPT%E5%90%91Plus%E7%94%A8%E6%88%B7%E5%BC%80%E6%94%BE%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90%E5%99%A8%E5%8A%9F%E8%83%BD.html","/posts/2023/Claude%E4%B8%BA%E4%BB%80%E4%B9%88%E7%89%87%E6%96%AD%E5%BC%8F%E8%BE%93%E5%87%BA.html","/posts/2023/Claude%E5%90%84%E7%89%88%E6%9C%AC%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BC%82%E6%98%AF%E4%BB%80%E4%B9%88.html","/posts/2023/Github%20Pages%E5%8D%9A%E5%AE%A2%E5%A6%82%E4%BD%95%E7%BB%91%E5%AE%9A%E6%A0%B9%E5%9F%9F%E5%90%8D.html","/posts/2023/%E5%88%9B%E4%BD%9C%E5%B0%8F%E8%AF%B4%E7%9A%84%E7%9B%B8%E5%85%B3%E6%8F%90%E7%A4%BA%E8%AF%AD.html","/posts/2023/%E5%9C%A8%E6%89%8B%E6%9C%BA%E4%B8%8A%E5%90%91github%20pages%20blog%20%E5%86%99%E4%BD%9C.html","/posts/2024/1.html","/posts/2024/2.html","/posts/2024/3.html","/posts/2024/4.html","/404.html","/docs/novel/","/docs/rust/","/posts/2008/","/posts/2009/","/posts/2010/","/posts/2018/","/posts/2019/","/posts/2020/","/posts/2021/","/posts/2022/","/posts/2023/","/posts/2024/","/category/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/%E6%8C%87%E5%8D%97/","/category/%E7%BC%96%E7%A8%8B/","/category/%E7%94%B5%E5%BD%B1/","/category/%E6%96%87%E5%AD%A6/","/category/%E5%88%9B%E4%B8%9A/","/tag/","/tag/chatgpt/","/tag/indiehacker/","/tag/%E7%A6%81%E7%94%A8/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E5%B8%83%E5%B1%80/","/tag/markdown/","/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/as3-expert/","/tag/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BB%8E0%E5%88%B01/","/tag/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/","/tag/%E7%AC%94%E8%AE%B0/","/tag/github/","/tag/%E5%B0%8F%E8%AF%B4/","/tag/%E5%9B%BD%E7%94%BB/","/tag/%E5%95%86%E4%B8%9A/","/tag/%E8%AF%97%E8%AF%8D/","/tag/%E6%95%B0%E5%AD%97%E5%8C%96/","/tag/tvp/","/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86/","/tag/%E4%BB%B7%E5%80%BC%E8%A7%82/","/tag/%E7%AE%A1%E7%90%86/","/tag/%E5%AD%A6%E4%B9%A0/","/tag/%E5%BE%AE%E6%9C%8D%E5%8A%A1/","/tag/%E6%9E%B6%E6%9E%84/","/tag/linux/","/tag/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/","/tag/%E6%B5%8B%E8%AF%95/","/tag/%E7%B1%BB%E5%BA%93/","/tag/%E8%AF%AD%E8%A8%80/","/tag/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/","/tag/%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B/","/tag/bun/","/tag/python/","/tag/%E7%AF%86%E5%88%BB/","/tag/grok/","/tag/%E7%BD%91%E6%96%87%E5%88%9B%E4%BD%9C/","/tag/%E9%A9%AC%E6%96%AF%E5%85%8B/","/tag/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91/","/tag/default/","/tag/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/","/article/","/star/","/timeline/"],Cs="SLIMSEARCH_QUERY_HISTORY",A=j(Cs,[]),Fs=()=>{const{queryHistoryCount:o}=D;return{enabled:o>0,queryHistories:A,addQueryHistory:h=>{A.value=Array.from(new Set([h,...A.value.slice(0,o-1)]))},removeQueryHistory:h=>{A.value=[...A.value.slice(0,h),...A.value.slice(h+1)]}}},Q=o=>ys[o.id]+("anchor"in o?`#${o.anchor}`:""),Ds="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=D,d=j(Ds,[]),fs=()=>({enabled:I>0,resultHistories:d,addResultHistory:a=>{{const h={link:Q(a),display:a.display};"header"in a&&(h.header=a.header),d.value=[h,...d.value.slice(0,I-1)]}},removeResultHistory:a=>{d.value=[...d.value.slice(0,a),...d.value.slice(a+1)]}}),ks=o=>{const a=is(),h=$(),f=rs(),m=T(0),v=F(()=>m.value>0),i=cs([]);return Bs(()=>{const{search:k,terminate:c}=ns(),g=ds(B=>{const{resultsFilter:H=e=>e,querySplitter:n,suggestionsFilter:q,...E}=a.value;B?(m.value+=1,k(B,h.value,E).then(e=>H(e,B,h.value,f.value)).then(e=>{m.value-=1,i.value=e}).catch(e=>{console.warn(e),m.value-=1,m.value||(i.value=[])})):i.value=[]},D.searchDelay-D.suggestDelay,{maxWait:5e3});As([o,h],([B])=>g(B.join(" "))),vs(()=>{c()})}),{isSearching:v,results:i}};var Rs=W({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(o,{emit:a}){const h=X(),f=$(),m=Z(ss),{addQueryHistory:v,queryHistories:i,removeQueryHistory:k}=Fs(),{resultHistories:c,addResultHistory:g,removeResultHistory:B}=fs(),H=ts(o,"queries"),{results:n,isSearching:q}=ks(H),E=ls({isQuery:!0,index:0}),e=T(0),r=T(0),P=F(()=>i.value.length>0||c.value.length>0),R=F(()=>n.value.length>0),w=F(()=>n.value[e.value]||null),M=()=>{const{isQuery:s,index:t}=E;t===0?(E.isQuery=!s,E.index=s?c.value.length-1:i.value.length-1):E.index=t-1},U=()=>{const{isQuery:s,index:t}=E;t===(s?i.value.length-1:c.value.length-1)?(E.isQuery=!s,E.index=0):E.index=t+1},O=()=>{e.value=e.value>0?e.value-1:n.value.length-1,r.value=w.value.contents.length-1},_=()=>{e.value=e.value<n.value.length-1?e.value+1:0,r.value=0},Y=()=>{r.value<w.value.contents.length-1?r.value+=1:_()},z=()=>{r.value>0?r.value-=1:O()},x=s=>s.map(t=>gs(t)?t:l(t[0],t[1])),J=s=>{if(s.type==="customField"){const t=us[s.index]||"$content",[u,C=""]=ps(t)?t[f.value].split("$content"):t.split("$content");return s.display.map(p=>l("div",x([u,...p,C])))}return s.display.map(t=>l("div",x(t)))},y=()=>{e.value=0,r.value=0,a("updateQuery",""),a("close")},K=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},m.value.queryHistory),i.value.map((s,t)=>l("div",{class:["slimsearch-result-item",{active:E.isQuery&&E.index===t}],onClick:()=>{a("updateQuery",s)}},[l(G,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},s),l("button",{class:"slimsearch-remove-icon",innerHTML:L,onClick:u=>{u.preventDefault(),u.stopPropagation(),k(t)}})]))])),N=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},m.value.resultHistory),c.value.map((s,t)=>l(b,{to:s.link,class:["slimsearch-result-item",{active:!E.isQuery&&E.index===t}],onClick:()=>{y()}},()=>[l(G,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[s.header?l("div",{class:"content-header"},s.header):null,l("div",s.display.map(u=>x(u)).flat())]),l("button",{class:"slimsearch-remove-icon",innerHTML:L,onClick:u=>{u.preventDefault(),u.stopPropagation(),B(t)}})]))]));return es("keydown",s=>{if(o.isFocusing){if(R.value){if(s.key==="ArrowUp")z();else if(s.key==="ArrowDown")Y();else if(s.key==="Enter"){const t=w.value.contents[r.value];v(o.queries.join(" ")),g(t),h.push(Q(t)),y()}}else if(s.key==="ArrowUp")M();else if(s.key==="ArrowDown")U();else if(s.key==="Enter"){const{index:t}=E;E.isQuery?(a("updateQuery",i.value[t]),s.preventDefault()):(h.push(c.value[t].link),y())}}}),os([e,r],()=>{var s;(s=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||s.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["slimsearch-result-wrapper",{empty:o.queries.length?!R.value:!P.value}],id:"slimsearch-results"},o.queries.length?q.value?l(Es,{hint:m.value.searching}):R.value?l("ul",{class:"slimsearch-result-list"},n.value.map(({title:s,contents:t},u)=>{const C=e.value===u;return l("li",{class:["slimsearch-result-list-item",{active:C}]},[l("div",{class:"slimsearch-result-title"},s||m.value.defaultTitle),t.map((p,V)=>{const S=C&&r.value===V;return l(b,{to:Q(p),class:["slimsearch-result-item",{active:S,"aria-selected":S}],onClick:()=>{v(o.queries.join(" ")),g(p),y()}},()=>[p.type==="text"?null:l(p.type==="title"?as:p.type==="heading"?hs:ms,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[p.type==="text"&&p.header?l("div",{class:"content-header"},p.header):null,l("div",J(p))])])})])})):m.value.emptyResult:P.value?[K(),N()]:m.value.emptyHistory)}});export{Rs as default};
