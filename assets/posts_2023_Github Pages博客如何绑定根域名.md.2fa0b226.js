import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.25d5caa7.js";const u=JSON.parse('{"title":"Github Pages 博客如何绑定根域名？","description":"","frontmatter":{"date":"2023-06-13T09:44:46.000Z"},"headers":[],"relativePath":"posts/2023/Github Pages博客如何绑定根域名.md","filePath":"posts/2023/Github Pages博客如何绑定根域名.md"}'),p={name:"posts/2023/Github Pages博客如何绑定根域名.md"},o=l(`<h1 id="github-pages-博客如何绑定根域名" tabindex="-1">Github Pages 博客如何绑定根域名？ <a class="header-anchor" href="#github-pages-博客如何绑定根域名" aria-label="Permalink to &quot;Github Pages 博客如何绑定根域名？&quot;">​</a></h1><p>Godaddy 的域名不需要域名备案，这是它方便的地方，但它不充许在根域名上直接添加 CNAME 记录，换句话说，原来在国内域名商下的域名，转移到 Godaddy 后，在 Github Pages 上绑定的根域名不再有效了。</p><p>以我的博客为例说明一下。原来我可以直接将根域名 yishulun.com 绑定到 rixingyike.github.io，www 域名通过 CNAME 绑定到根域名，这样无论读者访问根域名还是 www 域名，都可以跳转到根域名。国内早期网站网址的写法一般都会在前面带上 www，其实 www 只是一个子域名，与其它 blog、news 等子域名是等同的，为了照顾国内读者的使用习惯，我将 www 域名跳转到根域名（yishulun.com）。但是，在我的域名转移到 Godaddy 之后，这一招不好使了，Godaddy 的 DNS 解析不充许将根域名以 CNAME 的方式绑定到另一个二级域名上。</p><p>在国外，普遍认为根域名是一个域名的主要域名，www 只是一个从属的子域名。并且在 Godaddy 上，根域名只允许绑定 A 记录，不允许直接绑定 CNAME 记录，据说这是为了 CNAME 记录污染 DNS 缓存，造成在根域名上使用的邮件服务投递错乱。</p><p>那么这个问题怎么解决呢？怎么兼容老读者的使用习惯，使他们打开 yishulun.com 时看到页面不是网页荒漠呢？</p><p>有人说，可以在网站根目录下添加。htaccess 文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">RewriteEngine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span></span>
<span class="line"><span style="color:#B392F0;">RewriteCond</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">%{http_host}^yishulun.com</span><span style="color:#E1E4E8;"> [NC]</span></span>
<span class="line"><span style="color:#B392F0;">RewriteRule</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">^</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;">*)$http</span><span style="color:#9ECBFF;">://www.yishulun.com/</span><span style="color:#FFAB70;">$1</span><span style="color:#E1E4E8;"> [L,R=301]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">RewriteEngine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span></span>
<span class="line"><span style="color:#6F42C1;">RewriteCond</span><span style="color:#24292E;"> </span><span style="color:#032F62;">%{http_host}^yishulun.com</span><span style="color:#24292E;"> [NC]</span></span>
<span class="line"><span style="color:#6F42C1;">RewriteRule</span><span style="color:#24292E;"> </span><span style="color:#032F62;">^</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">.</span><span style="color:#24292E;">*)$http</span><span style="color:#032F62;">://www.yishulun.com/</span><span style="color:#E36209;">$1</span><span style="color:#24292E;"> [L,R=301]</span></span></code></pre></div><p>.htaccess 是给 Apache 服务器使用的网站配置文件，如果服务器不是 Apache，这个文件是起不到任何作用的。事实上我的 Github Pages 博客是由 Node.js 驱动的，因此这一招并不好使。</p><p>有人说，在页面上使用脚本实现 301 跳转，页面访问不到，JS 脚本怎么可能执行？或者在 Godaddy DCC 配置面板上，添加 Fowarding 记录，我试了这招，等待了一晚上并不好用——因为那个博主说，Godaddy 配置生效时间长，所以等了这么久。</p><p>最后说一下我是怎么配置成功的，现在读者无论访问 yishulun.com，还是访问 www.yishulun.com，最终都会跳转到 <a href="https://yishulun.com" target="_blank" rel="noreferrer">https://yishulun.com</a>。</p><p>第一步：在 Godaddy DCC 配置面板上，添加 A 记录分别到 185.199.108.153、185.199.109.153、185.199.110.153 和 185.199.111.153。完成这一步以后，稍后用 dig 指令检查域名配置，看到如下类似结果，说明配置成功了。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dig</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yishulun.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">; &lt;&lt;&gt;&gt; </span><span style="color:#B392F0;">DiG</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9.10</span><span style="color:#9ECBFF;">.6</span><span style="color:#E1E4E8;"> &lt;&lt;&gt;&gt; </span><span style="color:#9ECBFF;">yishulun.com</span></span>
<span class="line"><span style="color:#E1E4E8;">;; </span><span style="color:#B392F0;">global</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">options:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+cmd</span></span>
<span class="line"><span style="color:#E1E4E8;">;; </span><span style="color:#B392F0;">Got</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">answer:</span></span>
<span class="line"><span style="color:#E1E4E8;">;; </span><span style="color:#B392F0;">-&gt;&gt;HEADER&lt;&lt;-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">opcode:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">QUERY,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NOERROR,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">id:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">37755</span></span>
<span class="line"><span style="color:#E1E4E8;">;; </span><span style="color:#B392F0;">flags:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">qr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ra</span><span style="color:#E1E4E8;">; </span><span style="color:#B392F0;">QUERY:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ANSWER:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#9ECBFF;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">AUTHORITY:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ADDITIONAL:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">;; </span><span style="color:#B392F0;">QUESTION</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">SECTION:</span></span>
<span class="line"><span style="color:#E1E4E8;">;</span><span style="color:#B392F0;">yishulun.com.</span><span style="color:#E1E4E8;">			</span><span style="color:#9ECBFF;">IN</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">A</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">;; </span><span style="color:#B392F0;">ANSWER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">SECTION:</span></span>
<span class="line"><span style="color:#B392F0;">yishulun.com.</span><span style="color:#E1E4E8;">		</span><span style="color:#79B8FF;">600</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">IN</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">A</span><span style="color:#E1E4E8;">	</span><span style="color:#79B8FF;">185.199</span><span style="color:#9ECBFF;">.109.153</span></span>
<span class="line"><span style="color:#B392F0;">yishulun.com.</span><span style="color:#E1E4E8;">		</span><span style="color:#79B8FF;">600</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">IN</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">A</span><span style="color:#E1E4E8;">	</span><span style="color:#79B8FF;">185.199</span><span style="color:#9ECBFF;">.111.153</span></span>
<span class="line"><span style="color:#B392F0;">yishulun.com.</span><span style="color:#E1E4E8;">		</span><span style="color:#79B8FF;">600</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">IN</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">A</span><span style="color:#E1E4E8;">	</span><span style="color:#79B8FF;">185.199</span><span style="color:#9ECBFF;">.110.153</span></span>
<span class="line"><span style="color:#B392F0;">yishulun.com.</span><span style="color:#E1E4E8;">		</span><span style="color:#79B8FF;">600</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">IN</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">A</span><span style="color:#E1E4E8;">	</span><span style="color:#79B8FF;">185.199</span><span style="color:#9ECBFF;">.108.153</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dig</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yishulun.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">; &lt;&lt;&gt;&gt; </span><span style="color:#6F42C1;">DiG</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9.10</span><span style="color:#032F62;">.6</span><span style="color:#24292E;"> &lt;&lt;&gt;&gt; </span><span style="color:#032F62;">yishulun.com</span></span>
<span class="line"><span style="color:#24292E;">;; </span><span style="color:#6F42C1;">global</span><span style="color:#24292E;"> </span><span style="color:#032F62;">options:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+cmd</span></span>
<span class="line"><span style="color:#24292E;">;; </span><span style="color:#6F42C1;">Got</span><span style="color:#24292E;"> </span><span style="color:#032F62;">answer:</span></span>
<span class="line"><span style="color:#24292E;">;; </span><span style="color:#6F42C1;">-&gt;&gt;HEADER&lt;&lt;-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">opcode:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">QUERY,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NOERROR,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">id:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">37755</span></span>
<span class="line"><span style="color:#24292E;">;; </span><span style="color:#6F42C1;">flags:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">qr</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ra</span><span style="color:#24292E;">; </span><span style="color:#6F42C1;">QUERY:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ANSWER:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#032F62;">,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">AUTHORITY:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ADDITIONAL:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">;; </span><span style="color:#6F42C1;">QUESTION</span><span style="color:#24292E;"> </span><span style="color:#032F62;">SECTION:</span></span>
<span class="line"><span style="color:#24292E;">;</span><span style="color:#6F42C1;">yishulun.com.</span><span style="color:#24292E;">			</span><span style="color:#032F62;">IN</span><span style="color:#24292E;">	</span><span style="color:#032F62;">A</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">;; </span><span style="color:#6F42C1;">ANSWER</span><span style="color:#24292E;"> </span><span style="color:#032F62;">SECTION:</span></span>
<span class="line"><span style="color:#6F42C1;">yishulun.com.</span><span style="color:#24292E;">		</span><span style="color:#005CC5;">600</span><span style="color:#24292E;">	</span><span style="color:#032F62;">IN</span><span style="color:#24292E;">	</span><span style="color:#032F62;">A</span><span style="color:#24292E;">	</span><span style="color:#005CC5;">185.199</span><span style="color:#032F62;">.109.153</span></span>
<span class="line"><span style="color:#6F42C1;">yishulun.com.</span><span style="color:#24292E;">		</span><span style="color:#005CC5;">600</span><span style="color:#24292E;">	</span><span style="color:#032F62;">IN</span><span style="color:#24292E;">	</span><span style="color:#032F62;">A</span><span style="color:#24292E;">	</span><span style="color:#005CC5;">185.199</span><span style="color:#032F62;">.111.153</span></span>
<span class="line"><span style="color:#6F42C1;">yishulun.com.</span><span style="color:#24292E;">		</span><span style="color:#005CC5;">600</span><span style="color:#24292E;">	</span><span style="color:#032F62;">IN</span><span style="color:#24292E;">	</span><span style="color:#032F62;">A</span><span style="color:#24292E;">	</span><span style="color:#005CC5;">185.199</span><span style="color:#032F62;">.110.153</span></span>
<span class="line"><span style="color:#6F42C1;">yishulun.com.</span><span style="color:#24292E;">		</span><span style="color:#005CC5;">600</span><span style="color:#24292E;">	</span><span style="color:#032F62;">IN</span><span style="color:#24292E;">	</span><span style="color:#032F62;">A</span><span style="color:#24292E;">	</span><span style="color:#005CC5;">185.199</span><span style="color:#032F62;">.108.153</span></span></code></pre></div><p>第二步，添加 CNAME 记录到 rixingyike.github.io。</p><p>第三步，在 Github Pages 配置处，填写 Custom domain 为 yishulun.com，注意这里是根域名。并选择 Enforce HTTPS 选项。</p><p>第四步，在网站根目录下，放置一个 CNAME 文件，内容为 yishulun.com。如果你使用的静态博客程度也是 vitepress，将这个文件放在。vitepress/public 目录下即可。</p><p>完成以上步骤，配置就算完成了。</p>`,16),t=[o];function e(c,r,E,y,F,i){return n(),a("div",null,t)}const h=s(p,[["render",e]]);export{u as __pageData,h as default};
