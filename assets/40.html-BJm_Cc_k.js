import{_ as o,c as e,b as i,o as s}from"./app-C_IPuAWp.js";const n={};function p(c,t){return s(),e("div",null,t[0]||(t[0]=[i("<p>我的博客目前托管在 github 上，这带来的负面效果就是国内访问不稳定，为了解决这个问题，我使用了腾讯云的 CDN。</p><p>在 CND 里配置回源 HOST时，遇到了问题。官方文档说，这个地方应该写源地址，从哪里请求，就写哪个地址；而网上有位资深博主写，这里应该写自己的自定义域名，不然会不停重定向，造成网站无法访问。</p><p>我实践了一下，发现他们说的都对，只是不全面。</p><p>github pages 有一个 CNAME自定义域名功能，一般这个文件里我们写自己的自定义域名，例如我的就是 yishulun.com。这个文件无论我们用不用 CDN，用谁家的 CDN，腾讯的还是阿里的，这个文件都不用改。它的作用是：告诉 github服务器请求谁的资源，以此域名请求资源，等效于 rixingyike.github.io。</p><p>在腾讯云的 CDN上，文档说，请求谁就写谁的 HOST，这没毛病。对于自有站点，源站点如果部署的域名是 yishulun.com，这里就应该写yishulun.com。对于 github，服务器不是我们控制的，默认 github 给我分配的域名是rixingyike.github.io，如果我没有设置自定义域名，回源 HOST 就写rixingyike.github.io；现在，我设置了自定义域名，是 yishulun.com，我只有以这个域名请求资源，github 才知道是我在请求资源，所以这里回源 HOST 要写yishulun.com。上面提到的那位资深博主是这样讲的：回源 HOST 是请求源站资源时附带的 HOST 信息，嗯，是这样的，不附带这个信息 github 不认。</p><p>问题</p><p>1，能不能只用国内的 CDN 加速国内用户的访问速度？国外用户还直接从 github 走？</p><p>可以。CDN 只设置境内加速。同时域名解析那里，要有两个 CNAME 配置：</p><p>CNAME 境内 yishulun.com.cdn.dnsv1.com.</p><p>CNAME 境外 rixingyike.github.io.</p><p>腾讯云的 DNSPod 域名解析可以分境内境外，境外直接走原线路，境内走 CDN。</p><p>2，如何验证 CDN 是否生效？</p><p>可以用 dig yishulun.com和curl -sIL https://yishulun.com 命令。例如 dig 命令：</p><blockquote><p>yishulun.com. 36 IN CNAME yishulun.com.cdn.dnsv1.com. yishulun.com.cdn.dnsv1.com. 36 IN CNAME l8zo0y35.slt.sched.tdnsv8.com. l8zo0y35.slt.sched.tdnsv8.com. 36 IN A 221.204.15.51 l8zo0y35.slt.sched.tdnsv8.com. 36 IN A 124.166.238.87 l8zo0y35.slt.sched.tdnsv8.com. 36 IN A 116.131.57.65</p></blockquote><p>后面三个就是具体的 CDN 服务器节点了。</p><p>例如 curl 命令：</p><blockquote><p>HTTP/1.1 200 OK</p><p><strong>Content-Length</strong>: 33960</p><p><strong>Accept-Ranges</strong>: bytes</p><p><strong>X-NWS-LOG-UUID</strong>: 5388349266450121652</p><p><strong>Connection</strong>: keep-alive</p><p><strong>X-Cache-Lookup</strong>: Cache Refresh Hit</p></blockquote><p>其中X-NWS-LOG-UUID 是腾讯云添加唯一请求标识，用于记录日志的。有这个信息和上面的节点信息，就说明 CDN 加速生效了。</p>",18)]))}const l=o(n,[["render",p],["__file","40.html.vue"]]),r=JSON.parse('{"path":"/blog/2025/40.html","title":"腾讯云 CDN回源 HOST 是设置自己的域名还是 github 的二级域名？","lang":"zh-CN","frontmatter":{"createTime":"2025/10/30 07:42:55","tags":["Default"],"title":"腾讯云 CDN回源 HOST 是设置自己的域名还是 github 的二级域名？"},"headers":[],"readingTime":{"minutes":2.31,"words":694},"git":{"updatedTime":1761782997000,"contributors":[{"name":"李艺","username":"李艺","email":"9830131@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/李艺?v=4","url":"https://github.com/李艺"}]},"filePathRelative":"blog/2025/40.md","categoryList":[{"id":"126ac9","sort":10011,"name":"blog"},{"id":"a264e0","sort":10012,"name":"2025"}]}');export{l as comp,r as data};
