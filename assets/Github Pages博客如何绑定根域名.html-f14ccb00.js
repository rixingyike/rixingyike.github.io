import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as l,c as p,b as s,d as n,a as e,f as t}from"./app-2d091527.js";const r={},c=s("h1",{id:"github-pages-博客如何绑定根域名",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#github-pages-博客如何绑定根域名","aria-hidden":"true"},"#"),n(" Github Pages 博客如何绑定根域名？")],-1),u=s("p",null,"Godaddy 的域名不需要域名备案，这是它方便的地方，但它不充许在根域名上直接添加 CNAME 记录，换句话说，原来在国内域名商下的域名，转移到 Godaddy 后，在 Github Pages 上绑定的根域名不再有效了。",-1),d={href:"http://yishulun.com",target:"_blank",rel:"noopener noreferrer"},h={href:"http://rixingyike.github.io",target:"_blank",rel:"noopener noreferrer"},m={href:"http://yishulun.com",target:"_blank",rel:"noopener noreferrer"},b=s("p",null,"在国外，普遍认为根域名是一个域名的主要域名，www 只是一个从属的子域名。并且在 Godaddy 上，根域名只允许绑定 A 记录，不允许直接绑定 CNAME 记录，据说这是为了 CNAME 记录污染 DNS 缓存，造成在根域名上使用的邮件服务投递错乱。",-1),_={href:"http://yishulun.com",target:"_blank",rel:"noopener noreferrer"},k=t(`<p>有人说，可以在网站根目录下添加。htaccess 文件：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>RewriteEngine on
RewriteCond %<span class="token punctuation">{</span>http_host<span class="token punctuation">}</span>^yishulun.com <span class="token punctuation">[</span>NC<span class="token punctuation">]</span>
RewriteRule ^<span class="token punctuation">(</span>.*<span class="token punctuation">)</span><span class="token variable">$http</span>://www.yishulun.com/<span class="token variable">$1</span> <span class="token punctuation">[</span>L,R<span class="token operator">=</span><span class="token number">301</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>.htaccess 是给 Apache 服务器使用的网站配置文件，如果服务器不是 Apache，这个文件是起不到任何作用的。事实上我的 Github Pages 博客是由 Node.js 驱动的，因此这一招并不好使。</p><p>有人说，在页面上使用脚本实现 301 跳转，页面访问不到，JS 脚本怎么可能执行？或者在 Godaddy DCC 配置面板上，添加 Fowarding 记录，我试了这招，等待了一晚上并不好用——因为那个博主说，Godaddy 配置生效时间长，所以等了这么久。</p>`,4),v={href:"http://yishulun.com",target:"_blank",rel:"noopener noreferrer"},g={href:"http://www.yishulun.com",target:"_blank",rel:"noopener noreferrer"},y={href:"https://yishulun.com",target:"_blank",rel:"noopener noreferrer"},f=t(`<p>第一步：在 Godaddy DCC 配置面板上，添加 A 记录分别到 185.199.108.153、185.199.109.153、185.199.110.153 和 185.199.111.153。完成这一步以后，稍后用 dig 指令检查域名配置，看到如下类似结果，说明配置成功了。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">dig</span> yishulun.com

<span class="token punctuation">;</span> <span class="token operator">&lt;&lt;</span><span class="token operator">&gt;&gt;</span> DiG <span class="token number">9.10</span>.6 <span class="token operator">&lt;&lt;</span><span class="token operator">&gt;&gt;</span> yishulun.com
<span class="token punctuation">;</span><span class="token punctuation">;</span> global options: +cmd
<span class="token punctuation">;</span><span class="token punctuation">;</span> Got answer:
<span class="token punctuation">;</span><span class="token punctuation">;</span> -<span class="token operator">&gt;&gt;</span>HEADER<span class="token operator">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class="token number">37755</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span> flags: qr rd ra<span class="token punctuation">;</span> QUERY: <span class="token number">1</span>, ANSWER: <span class="token number">4</span>, AUTHORITY: <span class="token number">0</span>, ADDITIONAL: <span class="token number">0</span>

<span class="token punctuation">;</span><span class="token punctuation">;</span> QUESTION SECTION:
<span class="token punctuation">;</span>yishulun.com.			IN	A

<span class="token punctuation">;</span><span class="token punctuation">;</span> ANSWER SECTION:
yishulun.com.		<span class="token number">600</span>	IN	A	<span class="token number">185.199</span>.109.153
yishulun.com.		<span class="token number">600</span>	IN	A	<span class="token number">185.199</span>.111.153
yishulun.com.		<span class="token number">600</span>	IN	A	<span class="token number">185.199</span>.110.153
yishulun.com.		<span class="token number">600</span>	IN	A	<span class="token number">185.199</span>.108.153
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),w={href:"http://rixingyike.github.io",target:"_blank",rel:"noopener noreferrer"},N={href:"http://yishulun.com",target:"_blank",rel:"noopener noreferrer"},A={href:"http://yishulun.com",target:"_blank",rel:"noopener noreferrer"},E=s("p",null,"完成以上步骤，配置就算完成了。",-1);function C(G,R){const a=i("ExternalLinkIcon");return l(),p("div",null,[c,u,s("p",null,[n("以我的博客为例说明一下。原来我可以直接将根域名 "),s("a",d,[n("yishulun.com"),e(a)]),n(" 绑定到 "),s("a",h,[n("rixingyike.github.io"),e(a)]),n("，www 域名通过 CNAME 绑定到根域名，这样无论读者访问根域名还是 www 域名，都可以跳转到根域名。国内早期网站网址的写法一般都会在前面带上 www，其实 www 只是一个子域名，与其它 blog、news 等子域名是等同的，为了照顾国内读者的使用习惯，我将 www 域名跳转到根域名（"),s("a",m,[n("yishulun.com"),e(a)]),n("）。但是，在我的域名转移到 Godaddy 之后，这一招不好使了，Godaddy 的 DNS 解析不充许将根域名以 CNAME 的方式绑定到另一个二级域名上。")]),b,s("p",null,[n("那么这个问题怎么解决呢？怎么兼容老读者的使用习惯，使他们打开 "),s("a",_,[n("yishulun.com"),e(a)]),n(" 时看到页面不是网页荒漠呢？")]),k,s("p",null,[n("最后说一下我是怎么配置成功的，现在读者无论访问 "),s("a",v,[n("yishulun.com"),e(a)]),n("，还是访问 "),s("a",g,[n("www.yishulun.com"),e(a)]),n("，最终都会跳转到 "),s("a",y,[n("https://yishulun.com"),e(a)]),n("。")]),f,s("p",null,[n("第二步，添加 CNAME 记录到 "),s("a",w,[n("rixingyike.github.io"),e(a)]),n("。")]),s("p",null,[n("第三步，在 Github Pages 配置处，填写 Custom domain 为 "),s("a",N,[n("yishulun.com"),e(a)]),n("，注意这里是根域名。并选择 Enforce HTTPS 选项。")]),s("p",null,[n("第四步，在网站根目录下，放置一个 CNAME 文件，内容为 "),s("a",A,[n("yishulun.com"),e(a)]),n("。如果你使用的静态博客程度也是 vitepress，将这个文件放在。vitepress/public 目录下即可。")]),E])}const S=o(r,[["render",C],["__file","Github Pages博客如何绑定根域名.html.vue"]]);export{S as default};
